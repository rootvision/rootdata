----------------------------------------------------------------------
**  FTP window promths in wordpress
----------------------------------------------------------------------

Apache handlers control how the Apache web server software manages certain file types and extensions for your site. Apache comes configured to handle CGI scripts and server-parsed files. You can configure Apache to handle a new file type with an existing handler by manually adding the handler and extension below. For example, to have the server treat files with the extension .example as CGI files, you would type “cgi-script” under Handler and “.example” under Extension(s).


PHP runs as the Apache user on this server. On your end you could have just placed the following in wp-config:

define('FTP_HOST', 'ftp.my-site.example.com');
define('FTP_USER', 'my-ftp-username');
define('FTP_PASS', 'my-ftp-password');
define('FS_METHOD', 'direct');

On our end I just changed ownership of those files to the apache user
----------------------------------------------------------------------


--------------------------------------------------------------------------
**  Website Under Construction (Code) 
--------------------------------------------------------------------------
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Under Construction</title>
</head>
<body>
<br><br><br><br><br><br><br>
<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
<tr>
<td align="center">
<h1 style="margin:0;padding:0;font-family: trebuchet ms;">This Website is Under Construction.
<br><small style="color: #888;" align="center">Come Back Soon.</small>
</h1>
</td>
</tr>
</table>
</body>
</html>
--------------------------------------------------------------------------


--------------------------------------------------------------------------
***		To reset all users password
--------------------------------------------------------------------------
Create the file /root/passch.sh 

#! /bin/bash
ls -1 /var/cpanel/users | while read user; do
pass=`strings /dev/urandom | tr -dc .~?_A-Z-a-z-0-9 | head -c16 | xargs`
echo “$user $pass” >> new-pass.txt
/scripts/realchpass $user $pass
/scripts/ftpupdate
done
! /bin/bash

Run the below command as a root user

# sh /root/passch.sh
--------------------------------------------------------------------------


--------------------------------------------------------------------------
*** Steps to follow, if /tmp is full after removing the content.
--------------------------------------------------------------------------

+-----------------+
/scripts/restartsrv_mysql --stop
umount -l /tmp
umount -l /var/tmp
rm -fv /usr/tmpDSK
/scripts/securetmp
/scripts/restartsrv_mysql --start
+-----------------+

+-----------------+
/scripts/restartsrv_httpd --stop
/scripts/restartsrv_mysql --stop
umount -l /tmp
umount -l /var/tmp
rm -fv /usr/tmpDSK
/scripts/securetmp
/scripts/restartsrv_mysql --start
/scripts/restartsrv_httpd --start
+-----------------+

--------------------------------------------------------------------------


--------------------------------------------------------------------------
https://www.panthur.com.au/members/knowledgebase/348/LiteSpeed-and-max-execution-time.html

** .htaccess <code>	-->> Timeout error on lightspeed
--------------------------------------------------------------------------

RewriteEngine On
RewriteRule .* - [E=noabort:1]
RewriteRule .* - [E=noconntimeout:1]

--------------------------------------------------------------------------


--------------------------------------------------------------------------
** Change nameserver IP address via SSH
--------------------------------------------------------------------------

To change nameserver IP address from below location on shell
vim /etc/nameserverips	

If you nameserver zone is empty, just run below given command.
To update the nameserver in WHM -->> Run command on shell  #/usr/local/cpanel/scripts/updatenameserverips

--------------------------------------------------------------------------


--------------------------------------------------------------------------
Error ***  " How to solve Google Chrome v53 ERR_SSL_OBSOLETE_CIPHER issue"  ***
--------------------------------------------------------------------------
https://saifcse.wordpress.com/2016/09/29/how-to-solve-google-chrome-v53-err_ssl_obsolete_cipher-issue/
https://documentation.cpanel.net/display/EA/Advanced+Apache+Configuration

How to solve this for Apache on a Linux box: For CentOS edit your /etc/httpd/conf.d/ssl.conf file. Also if you have VirtualHost and want to get this effective for all your websites, edit your /etc/httpd/conf/httpd.conf file and add the followings outside of <VirtualHost> tag.

SSLProtocol all -SSLv2 -SSLv3
SSLHonorCipherOrder On
SSLCipherSuite EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5

Restart apache after saving the config file.
--------------------------------------------------------------------------


--------------------------------------------------------------------------
**  Apache 2.4: Block access to xmlrpc.php of all domains
--------------------------------------------------------------------------
created a file in

/etc/apache2/conf.d/block.conf

and added the following content:

<FilesMatch "(^\.|wp-config\.php|xmlrpc\.php|(?<!robots)\.txt|(liesmich|readme)\.*)"> 
Require all denied
</FilesMatch>

Restart apache and check, it should be work

If I try any domain on the server I'm still getting access: example.com/xmlrpc.php

I would have expected an "Forbidden"-error.
--------------------------------------------------------------------------


--------------------------------------------------------------------------
** Block WordPress xmlrpc.php requests with .htaccess
--------------------------------------------------------------------------
# Block WordPress xmlrpc.php requests
<Files xmlrpc.php>
order deny,allow
deny from all
allow from 123.123.123.123
</Files>
--------------------------------------------------------------------------


--------------------------------------------------------------------------
**  htaccess file: allow access to xmlrpc.php
--------------------------------------------------------------------------
<Files xmlrpc.php>
order allow,deny
allow from all
</Files>
--------------------------------------------------------------------------


--------------------------------------------------------------------------
** How to reset Litespeed admin password:
--------------------------------------------------------------------------.
https://iserversupport.com/reset-litespeed-admin-password/

Reset Litespeed admin password

Step 1.
Log into the server via SSH

Step 2.
Go to the directory that you have installed litespeed. The default directory is,
# cd /usr/local/lsws/admin/misc

Step 3.
# sh ./admpass.sh

Step 4.
Then, it will asks for the username to log into the administration web interface. This should be admin. Then, you need to enter the password

Step 5.
# /etc/init.d/restart lsws
--------------------------------------------------------------------------


--------------------------------------------------------------------------
default-to-gd (http error while uploading the image)
--------------------------------------------------------------------------
=== Default to GD ===
Contributors: dh-shredder
Tags: image gd
Requires at least: 3.5
Tested up to: 3.5
Stable tag: 1.0

Sets GD as default WP_Image_Editor class.

== Description ==

As of WordPress 3.5, GD has been abstracted out into WP_Image_Editor, and Imagick has been made the default image manipulation engine.

In most cases, this is what you want.  However, if you're having issues with Imagick, or just prefer the way that GD handles your images, this plugin sets GD as the default WP_Image_Editor class for WordPress.

== Installation ==

1. Upload the folder `default-to-gd` to the `/wp-content/plugins/` directory
2. Activate the plugin through the 'Plugins' menu in WordPress

** Create file inside directory (default-to-gd/default-to-gd.php)

+-----------------------+
<?php
/*
Plugin Name: Default to GD
Plugin URI: http://wordpress.org/extend/plugins/default-to-gd
Description: Sets GD as default WP_Image_Editor class.
Author: Mike Schroder
Version: 1.0
Author URI: http://www.getsource.net/
*/
function ms_image_editor_default_to_gd( $editors ) {
	$gd_editor = 'WP_Image_Editor_GD';
	$editors = array_diff( $editors, array( $gd_editor ) );
	array_unshift( $editors, $gd_editor );
	return $editors;
}
add_filter( 'wp_image_editors', 'ms_image_editor_default_to_gd' );
+-----------------------+

--------------------------------------------------------------------------


--------------------------------------------------------------------------
** How to Fix: The Domain already exists in Apache Configuration **
--------------------------------------------------------------------------

grep mydomain.com /etc/userdomains  		-->> To Verify Ownership of the Domain

ls –ld /var/named/mydomain.com.db		-->> To Verify if a DNS Zone exists for the Domain

/scripts/killdns mydomain.com			-->> To Kill the DNS Zone for the domain

grep mydomain.com /var/cpanel/users/*   -->> To make sure no cPanel Users are showing existing traces of the domain

grep mydomain.com /var/cpanel/userdata/*/*     -->> To make sure no enter is been enter in the { main, main.cache } files.

/scripts/updateuserdomains		-->>  To update users domain 

/scripts/rebuildhttpdconf		-->>  To rebuild httpd conf file

service httpd restart			-->> To restart the service

--------------------------------------------------------------------------

--------------------------------------------------------------------------
** A DNS entry for “xxx.com” already exists. You must remove this DNS entry from all servers in the DNS cluster to proceed
--------------------------------------------------------------------------

cp -rp /var/named/domain.com.db /var/named/domain.com.db_back

/scripts/killdns domain.com

cat /var/cpanel/userdata/$user_name/main

--------------------------------------------------------------------------

--------------------------------------------------------------------------
**  Dirtycow virus
--------------------------------------------------------------------------

Script file to be download --->>  https://access.redhat.com/sites/default/files/rh-cve-2016-5195_5.sh

And then you will need to update the kernel version.

--------------------------------------------------------------------------


--------------------------------------------------------------------------
**  Plesk error
--------------------------------------------------------------------------

Unable to repair database -->> Follow the steps.
https://support.managed.com/kb/a447/how-to-shrink-your-mssql-database-log-file-truncate-transaction-log.aspx

How to Shrink Your MS SQL Database Log File / Truncate Transaction Log

  1  Log into Microsoft SQL Server Management Studio
  2  Right click on your database.
  3  Select Properties.
  4  Click on Options.
  5  Change the recovery model to Simple.
  6  Click OK.
  7  Right click on the database.
  8  Select Tasks > Shrink > Database.
  9  Click OK.
  10 Right click on the database.
  11 Select Properties.
  12 Click on Options.
  13 Change the recovery model to Full.
  14 Click OK.
--------------------------------------------------------------------------

--------------------------------------------------------------------------
*** Showing Soucre code on browser
--------------------------------------------------------------------------

History

  857  2017-01-30 15:44:46 ls
  858  2017-01-30 15:44:49 ll
  859  2017-01-30 15:46:19 top
  860  2017-01-30 21:58:49 killall -9 lshttpd
  861  2017-01-30 21:58:56 mv -f /usr/sbin/httpd_ls_bak /usr/sbin/httpd
  862  2017-01-30 21:59:02 service httpd restart
  863  2017-01-30 22:02:17  rebuild_phpconf
  864  2017-01-30 22:02:24 /scripts/rebuild_phpconf
  865  2017-01-30 22:02:57 /usr/local/cpanel/bin/rebuild_phpconf
  866  2017-01-30 22:03:09 /usr/local/cpanel/bin/rebuild_phpconf --available
  867  2017-01-30 22:03:27 /scripts/rebuildhttpdconf 
  868  2017-01-30 22:03:55 nano /etc/apache2/conf/httpd.conf
  869  2017-01-30 22:06:33 /scripts/rebuildhttpdconf 
  870  2017-01-30 22:06:52 nano /etc/apache2/conf/httpd.conf
  871  2017-01-30 22:07:31 /scripts/rebuildhttpdconf 
  872  2017-01-30 22:07:49 cp -ar /etc/apache2/conf/httpd.conf  /etc/apache2/conf/httpd.conf-working31Jan2017
  873  2017-01-30 22:08:02 /scripts/rebuildhttpdconf 
  874  2017-01-30 22:09:13 service httpd restart
  875  2017-01-30 22:09:58 cat /etc/apache2/conf.d/ php.conf
  876  2017-01-30 22:10:03 cat /etc/apache2/conf.d/php.conf
  877  2017-01-30 22:13:04 ll /home2/southsea/fedsecinc.com/.htaccess 
  878  2017-01-30 22:13:12 chmod 644 /home2/southsea/fedsecinc.com/.htaccess
  879  2017-01-30 22:17:07 /scripts/rebuildhttpdconf 
  880  2017-01-30 22:17:21 w
  
--------------------------------------------------------------------------



*** To enable .eml extentsion
=============================
https://www.accuwebhosting.com/discussion/forum/peer-support/how-to-s/cpanel-whm-control-panel/1765-how-do-i-send-eml-file-in-emails


Solution

You need to perform below steps to allow .eml file extension.
Login to cPanel server.
copy /etc/cpanel_exim_system_filter file to /etc/cpanel_exim_system_filter_emlallowd.
Now, login to WHM -> exim configuration, Set default exim filter file as /etc/cpanel_exim_system_filter_emlallowd.
Remove "eml" extension from cpanel_exim_system_filter_emlallowd file.

*** To reset default cpanel permission
======================================
http://thecpaneladmin.com/fix-account-permissions/


#!/bin/bash
# Script to fix permissions of accounts
# Written by: Vanessa Vasile 5/13/10
# http://thecpaneladmin.com

if [ "$#" -lt "1" ];then
        echo "Must specify user"
        exit;
fi

USER=$@

for user in $USER
do

    HOMEDIR=$(egrep "^${user}:" /etc/passwd | cut -d: -f6)

    if [ ! -f /var/cpanel/users/$user ]; then
        echo "$user user file missing, likely an invalid user"

    elif [ "$HOMEDIR" == "" ];then
        echo "Couldn't determine home directory for $user"


    else

        echo "Setting ownership for user $user"

        chown -R $user:$user $HOMEDIR
        chmod 711 $HOMEDIR
        chown $user:nobody $HOMEDIR/public_html $HOMEDIR/.htpasswds
        chown $user:mail $HOMEDIR/etc $HOMEDIR/etc/*/shadow $HOMEDIR/etc/*/passwd

        echo "Setting permissions for user $USER"

        find $HOMEDIR -type f -exec chmod 644 {} \; -print
        find $HOMEDIR -type d -exec chmod 755 {} \; -print
        find $HOMEDIR -type d -name cgi-bin -exec chmod 755 {} \; -print
        find $HOMEDIR -type f \( -name "*.pl" -o -name "*.perl" \) -exec chmod 755 {} \; -print

        chmod 750 $HOMEDIR/public_html

        if [ -d "$HOMEDIR/.cagefs" ]; then
            chmod 775 $HOMEDIR/.cagefs
            chmod 700 $HOMEDIR/.cagefs/tmp
            chmod 700 $HOMEDIR/.cagefs/var
            chmod 777 $HOMEDIR/.cagefs/cache
            chmod 777 $HOMEDIR/.cagefs/run
        fi
    fi
done

=========================================================================================================================================











...
